{{ define "main" }}
<section class="section">
  <div class="container">
    <!-- Page Header -->
    <div class="row">
      <div class="col-12">
        <div class="text-center mb-5">
          <h1 class="h2 text-primary mb-3">{{ .Title }}</h1>
          <p class="lead text-muted">{{ .Description }}</p>
        </div>
      </div>
    </div>
    
    <!-- Get In Touch Content -->
    <div class="row">
      <div class="col-12">
        <h2>Get In Touch</h2>
        <p>We're here to help and answer any question you might have. We look forward to hearing from you! Whether you have a question about features, pricing, need a demo, or anything else, our team is ready to answer all your questions.</p>
      </div>
    </div>

    <!-- Quick Contact Options -->
    <h3>Quick Contact Options</h3>
    <div class="row mb-5">
      <div class="col-md-4 mb-3">
        <div class="contact-method text-center p-4 h-100 border rounded">
          <i class="fas fa-envelope fa-3x text-primary mb-3"></i>
          <h4>Email Us</h4>
          <p class="text-muted">For general inquiries and detailed questions</p>
          {{ with .Params.contact_info.email }}
          <a href="mailto:{{ . }}" class="btn btn-outline-primary">
            {{ . }}
          </a>
          {{ end }}
        </div>
      </div>
      
      <div class="col-md-4 mb-3">
        <div class="contact-method text-center p-4 h-100 border rounded">
          <i class="fas fa-phone fa-3x text-primary mb-3"></i>
          <h4>Call Us</h4>
          <p class="text-muted">For urgent matters and direct support</p>
          {{ with .Params.contact_info.phone }}
          <a href="tel:{{ . }}" class="btn btn-outline-primary">
            {{ . }}
          </a>
          {{ end }}
        </div>
      </div>
      
      <div class="col-md-4 mb-3">
        <div class="contact-method text-center p-4 h-100 border rounded">
          <i class="fas fa-clock fa-3x text-primary mb-3"></i>
          <h4>Business Hours</h4>
          <p class="text-muted">When you can reach us directly</p>
          <div class="small">
            {{ with .Params.contact_info.hours }}
            {{ . | markdownify }}
            {{ end }}
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Form Section -->
    <h3>Send Us a Message</h3>
    {{ if .Params.contact_form.enabled }}
    <div class="mb-5">
      <div class="contact-form-wrapper">
        <form 
          name="contact-form" 
          method="POST" 
          action="{{ .Params.contact_form.success_url | default "/contact/success/" }}"
          data-netlify="true"
          {{ if .Params.contact_form.recaptcha_enabled }}data-netlify-recaptcha="true"{{ end }}
          class="contact-form"
        >
          
          <!-- Hidden form name field for Netlify -->
          <input type="hidden" name="form-name" value="contact-form" />
          
          <!-- Honeypot spam protection -->
          {{ if .Params.contact_form.honeypot_enabled }}
          <div style="display: none;">
            <label>Don't fill this out if you're human: 
              <input name="bot-field" />
            </label>
          </div>
          {{ end }}

          <div class="row">
            <div class="col-md-6 mb-4">
              <div class="form-group">
                <label for="name" class="form-label">
                  Full Name <span class="text-danger">*</span>
                </label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="name" 
                  name="name" 
                  required
                  placeholder="Your full name"
                />
              </div>
            </div>
            
            <div class="col-md-6 mb-4">
              <div class="form-group">
                <label for="email" class="form-label">
                  Email Address <span class="text-danger">*</span>
                </label>
                <input 
                  type="email" 
                  class="form-control" 
                  id="email" 
                  name="email" 
                  required
                  placeholder="your.email@example.com"
                />
              </div>
            </div>
          </div>

          <div class="mb-4">
            <div class="form-group">
              <label for="subject" class="form-label">
                Subject
              </label>
              <input 
                type="text" 
                class="form-control" 
                id="subject" 
                name="subject" 
                placeholder="Subject of your inquiry"
              />
            </div>
          </div>

          <div class="mb-4">
            <div class="form-group">
              <label for="message" class="form-label">
                Message <span class="text-danger">*</span>
              </label>
              <textarea 
                class="form-control" 
                id="message" 
                name="message" 
                rows="6" 
                required
                placeholder="Please provide details about your inquiry..."
                minlength="10"
              ></textarea>
            </div>
          </div>

          <!-- reCAPTCHA if enabled -->
          {{ if .Params.contact_form.recaptcha_enabled }}
          <div class="mb-4">
            <div data-netlify-recaptcha="true"></div>
          </div>
          {{ end }}

          <!-- Submit button -->
          <div class="form-group">
            <button 
              type="submit" 
              class="btn btn-primary btn-lg px-4"
            >
              <i class="fas fa-paper-plane me-2"></i>
              Send Message
            </button>
          </div>
        </form>
      </div>
    </div>
    {{ else }}
    <div class="alert alert-info">
      <i class="fas fa-info-circle me-2"></i>
      Contact form is currently disabled. Please use the email or phone options above.
    </div>
    {{ end }}

    <!-- Map and Office Info Section -->
    {{ if .Params.map.enabled }}
    <h3>Find Us</h3>
    <div class="row mt-5">
      <div class="col-md-8">
        {{ with .Params.map }}
        <div class="map-container">
          <!-- OpenStreetMap iframe - no API key required -->
          <iframe
            class="map-embed"
            width="100%"
            height="400"
            style="border:0; width: 100%; height: 400px; border-radius: 0.5rem;"
            loading="lazy"
            allowfullscreen
            src="https://www.openstreetmap.org/export/embed.html?bbox=-74.006,40.712,-73.996,40.722&layer=mapnik&marker=40.717,-74.001"
            title="Office Location Map"
            aria-label="Office Location Map">
          </iframe>
          <div class="map-overlay mt-3">
            <small class="text-muted">
              <i class="fas fa-info-circle me-1"></i>
              Interactive map showing our approximate location
            </small>
          </div>
        </div>
        <div class="mt-3">
          <p class="text-muted">Visit us at our office located in the heart of the business district. We're easily accessible by public transportation and have parking available.</p>
        </div>
        {{ end }}
      </div>
      
      <div class="col-md-4">
        <div class="office-info p-4 bg-light rounded h-100">
          <h4><i class="fas fa-map-marker-alt me-2 text-primary"></i>Office Address</h4>
          <address class="mb-4">
            {{ with .Params.contact_info.address }}
            {{ . | markdownify }}
            {{ end }}
          </address>
          
          <h5><i class="fas fa-directions me-2 text-primary"></i>Getting Here</h5>
          <ul class="list-unstyled small">
            <li class="mb-2"><i class="fas fa-subway me-2 text-muted"></i>Metro: Green Line to Business Station</li>
            <li class="mb-2"><i class="fas fa-bus me-2 text-muted"></i>Bus: Routes 12, 34, 56</li>
            <li class="mb-2"><i class="fas fa-car me-2 text-muted"></i>Parking: Available in building garage</li>
            <li class="mb-2"><i class="fas fa-wheelchair me-2 text-muted"></i>Accessible entrance on main floor</li>
          </ul>
          
          {{ with .Params.map.address }}
          <div class="d-grid gap-2 d-sm-flex">
            <a href="https://www.google.com/maps/search/{{ . | urlquery }}" 
               target="_blank" 
               class="btn btn-primary btn-sm">
              <i class="fas fa-external-link-alt me-1"></i>
              Get Directions
            </a>
            <a href="https://www.openstreetmap.org/search?query={{ . | urlquery }}" 
               target="_blank" 
               class="btn btn-outline-secondary btn-sm">
              <i class="fas fa-map me-1"></i>
              View on OpenStreetMap
            </a>
          </div>
          {{ end }}
        </div>
      </div>
    </div>
    {{ end }}

    <!-- Social Media Section -->
    {{ if .Params.social_media }}
    <h3>Connect With Us</h3>
    <div class="row mt-5">
      <div class="col-12">
        <div class="text-center p-4 bg-light rounded">
          <h4 class="mb-3">Follow Us on Social Media</h4>
          <p class="text-muted mb-4">Stay updated with our latest news and updates</p>
          
          <div class="social-links">
            {{ range .Params.social_media }}
            <a href="{{ .url }}" 
               target="_blank" 
               rel="noopener noreferrer"
               class="btn btn-outline-primary me-3 mb-2"
               aria-label="{{ .name }}">
              <i class="{{ .icon }} me-2"></i>{{ .name }}
            </a>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
    {{ end }}

    <!-- FAQ Section -->
    <h3>Frequently Asked Questions</h3>
    <div class="accordion mt-5" id="contactFAQ">
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq1">
          <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
            How quickly do you respond to inquiries?
          </button>
        </h2>
        <div id="collapse1" class="accordion-collapse collapse" aria-labelledby="faq1" data-bs-parent="#contactFAQ">
          <div class="accordion-body">
            We typically respond to all inquiries within 24 hours during business days (Monday-Friday). For urgent matters, please call us directly during business hours for immediate assistance.
          </div>
        </div>
      </div>
      
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq2">
          <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
            What information should I include in my message?
          </button>
        </h2>
        <div id="collapse2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#contactFAQ">
          <div class="accordion-body">
            Please provide as much detail as possible about your inquiry, including your timeline, budget (if applicable), and any specific requirements. This helps us provide you with the most accurate and helpful response.
          </div>
        </div>
      </div>
      
      <div class="accordion-item">
        <h2 class="accordion-header" id="faq3">
          <button class="accordion-button collapsed faq-question" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
            Do you offer consultations?
          </button>
        </h2>
        <div id="collapse3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#contactFAQ">
          <div class="accordion-body">
            Yes! We offer free initial consultations to discuss your needs and how we can help. You can schedule a consultation by filling out our contact form or calling us directly.
          </div>
        </div>
      </div>
    </div>
    
    <!-- Additional Content from Markdown -->
    <div class="row mt-5">
      <div class="col-12">
        <div class="content">
          {{ .Content }}
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Additional Contact Section Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ContactPage",
  "name": "{{ .Title }}",
  "description": "{{ .Description }}",
  "url": "{{ .Permalink }}",
  "mainEntity": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}",
    {{ with .Params.contact_info.email }}"email": "{{ . }}",{{ end }}
    {{ with .Params.contact_info.phone }}"telephone": "{{ . }}",{{ end }}
    {{ with .Params.contact_info.address }}"address": {
      "@type": "PostalAddress",
      "streetAddress": "{{ . | replaceRE "\n.*" "" }}",
      "addressLocality": "Your City",
      "addressRegion": "ST",
      "postalCode": "12345",
      "addressCountry": "US"
    },{{ end }}
    "contactPoint": {
      "@type": "ContactPoint",
      "contactType": "Customer Service",
      {{ with .Params.contact_info.email }}"email": "{{ . }}",{{ end }}
      {{ with .Params.contact_info.phone }}"telephone": "{{ . }}",{{ end }}
      "availableLanguage": ["English"]
    }
  }
}
</script>

<!-- Contact page specific styles -->
<style>
.contact-method {
  transition: all 0.3s ease;
  border: 1px solid #e9ecef !important;
}

.contact-method:hover {
  border-color: var(--color-primary, #0AA8A7) !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.contact-method i {
  color: var(--color-primary, #0AA8A7);
}

.office-info h4,
.office-info h5 {
  color: var(--color-secondary, #376f92);
}

.office-info address {
  color: #6c757d;
  font-style: normal;
  line-height: 1.6;
}

.social-links .btn {
  border-radius: 25px;
  padding: 10px 20px;
  transition: all 0.3s ease;
}

.social-links .btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.accordion-button {
  color: var(--color-secondary, #376f92);
  font-weight: 500;
}

.accordion-button:not(.collapsed) {
  background-color: rgba(10, 168, 167, 0.1);
  border-color: var(--color-primary, #0AA8A7);
  color: var(--color-primary, #0AA8A7);
}

.accordion-button:focus {
  box-shadow: 0 0 0 0.25rem rgba(10, 168, 167, 0.25);
}

/* FAQ Questions - Bold Blue Styling */
.faq-question {
  color: var(--color-primary, #0AA8A7) !important;
  font-weight: 700 !important;
  font-size: 1.1rem;
}

.faq-question:not(.collapsed) {
  background-color: rgba(10, 168, 167, 0.15);
  border-color: var(--color-primary, #0AA8A7);
}

.faq-question:hover {
  color: var(--color-secondary, #376f92) !important;
  background-color: rgba(10, 168, 167, 0.05);
}

/* Contact Form Styling */
.contact-form-wrapper {
  max-width: 800px;
  margin: 0 auto;
}

.contact-form {
  background: #ffffff;
  padding: 2rem;
  border-radius: 0.5rem;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  border: 1px solid rgba(0, 0, 0, 0.125);
}

.contact-form .form-label {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #495057;
}

.contact-form .form-control {
  border-radius: 0.375rem;
  border: 1px solid #ced4da;
  padding: 0.75rem;
  font-size: 1rem;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
}

.contact-form .form-control:focus {
  border-color: var(--color-primary, #0AA8A7);
  box-shadow: 0 0 0 0.2rem rgba(10, 168, 167, 0.25);
}

.contact-form .btn-primary {
  background-color: var(--color-primary, #0AA8A7);
  border-color: var(--color-primary, #0AA8A7);
  padding: 0.75rem 2rem;
  font-weight: 600;
  transition: all 0.15s ease-in-out;
}

.contact-form .btn-primary:hover {
  background-color: var(--color-secondary, #376f92);
  border-color: var(--color-secondary, #376f92);
  transform: translateY(-1px);
}

/* Map Styling */
.map-container {
  position: relative;
  margin: 1.5rem 0;
  border-radius: 0.5rem;
  overflow: hidden;
  box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
  border: 1px solid rgba(0, 0, 0, 0.125);
}

.map-embed {
  display: block;
  border-radius: 0.5rem;
  transition: opacity 0.3s ease;
}

.map-overlay {
  color: #6c757d;
}

@media (max-width: 768px) {
  .contact-method {
    margin-bottom: 1rem;
  }
  
  .social-links .btn {
    margin-bottom: 0.5rem;
    width: 100%;
    max-width: 200px;
  }
  
  .contact-form {
    padding: 1.5rem;
  }
  
  .contact-form .btn-primary {
    width: 100%;
    padding: 1rem;
  }
  
  .map-container {
    margin: 1rem 0;
  }
}
</style>
{{ end }}